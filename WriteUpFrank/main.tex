\documentclass[a4paper, 12pt, titlepage, bibtotoc]{scrartcl} %scrartcl für kurze Artikel

\renewcommand*\sectfont{\normalcolor\rmfamily\bfseries}
\renewcommand*\descfont{\rmfamily\bfseries}
\setkomafont{dictum}{\normalfont\normalcolor\rmfamily\small}

\makeatletter% siehe De-TeX-FAQ
\renewcommand*{\toc@heading}{%
  \addsec{\contentsname}% bei scrartcl \addsec statt \addchap
  \@mkboth{\contentsname}{\contentsname}%
}
\makeatother% siehe \makeatletter

\usepackage[ngerman]{babel}
\usepackage[ansinew]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{color}
% \usepackage{courier} % Monospace/Truetype umstellen
\usepackage{enumitem} % \begin{enumerate}[label={\alph*)}] \item \end{enumerate} für a) b) c)...
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{setspace}
\usepackage{ulem}
	\normalem %stellt emph{} wieder auf kursiv, sonst unterstrichen
\usepackage{graphicx}
\graphicspath{{img/}}
\usepackage[hmargin={3cm,3cm}, vmargin={2.5cm, 3.5cm}]{geometry}
% \usepackage{times}
\usepackage{mathptmx}
\usepackage{nicefrac} 	
\usepackage{tikz}
\usepackage{scalefnt}
\usepackage{titlesec}
\titlespacing{\section}{0pt}{*2.5}{*1.5}
\titlespacing{\subsection}{0pt}{*2}{*1}
\titlespacing{\subsubsection}{0pt}{*1}{*0.5}

\tolerance=500

\usepackage{url}
\urlstyle{leo}

% Punkt + Komma Abstände bei Tausendern/Dezimalzahlen ans dt. anpassen
% \mathcode`,="013B
% \mathcode`.="613A

%\usepackage{hyperref}
\usepackage{csquotes}
\usepackage{parcolumns}
% \usepackage{parskip}

\bibliography{literature}
\usepackage[style=authoryear]{biblatex} 
\addbibresource{literature.bib}

\DefineBibliographyStrings{ngerman}{
    references = {Literaturverzeichnis}
}

\defbibenvironment{bibliography}
{\list{}
{\setlength{\leftmargin}{\bibhang}%
\setlength{\itemindent}{-\leftmargin}%
\setlength{\itemsep}{12px}%
\setlength{\parsep}{\bibparsep}}}
{\endlist}
{\item}

% \renewbibmacro*{cite:year+labelyear}{%
% \iffieldundef{year}
% {}
% {\printtext[bibhyperref]{%
% \mkbibparens{%
% \printfield{year}%
% \printfield{labelyear}}}}}


%%%% Klammern um die Jahreszahl 
% \renewbibmacro*{cite:labelyear+extrayear}{%
% \iffieldundef{labelyear}
% {}
% {\printtext[bibhyperref]{%
% \mkbibparens{\iffieldundef{origyear}{}{\printfield{origyear}\addslash}% <--- added
% \printfield{labelyear}%
% \printfield{extrayear}}}}}
% 
% \renewbibmacro*{date+extrayear}{%
% \iffieldundef{year}
% {}
% {\printtext[parens]{%
% \iffieldundef{origyear}{}{\printfield{origyear}\addslash}%<--- added
% \printdateextra}}}

%Schriftart http://tu-dresden.de/Members/jan.rudl/latex_win/fonts.pdf
%\usepackage[T1]{fontenc}
%\newcommand{\changefont}[3]{
%\fontfamily{#1} \fontseries{#2} \fontshape{#3} \selectfont}

% \setlength{\tabcolsep}{5pt} %colspan
% \renewcommand{\arraystretch}{1.3} %rowspan

\usepackage{parskip}

\begin{document}

\input{inc.title.tex}

% \setcounter{page}{0}\clearpage\newpage
\renewcommand{\baselinestretch}{1.25}\normalsize


\pagenumbering{Roman} \setcounter{page}{2}
\addcontentsline{toc}{section}{Inhaltsverzeichnis}
\tableofcontents

\renewcommand{\baselinestretch}{1.50}\normalsize

\newpage

\addcontentsline{toc}{section}{Abbildungsverzeichnis}
\listoffigures

\newpage

\section*{Abkürzungsverzeichnis}
\addcontentsline{toc}{section}{Abkürzungsverzeichnis}

\begin{tabular}{ll}
CSV & Comma-Separated Value\\
GSM & Global System for Mobile Communications\\
GPS & Global Positioning System\\
UMTS & Universal Mobile Telecommunications System
\end{tabular}

\newpage

\listoftables
\addcontentsline{toc}{section}{Tabellenverzeichnis}

\newpage

\pagenumbering{arabic} \setcounter{page}{1}

\section{Einleitung}

\begin{description}
\item[Problemstellung] Heranführen an das Thema. Warum soll Arbeit geschrieben werden. Offene Frage mit Problembeschreibung.
\item[Zielstellung] Ein oder zwei Sätze zum Ziel.
\item[Methodik und Vorgehensweise] Wie werden Ergebnisse ermittelt? Gliederung der Arbeit in Worten.
\end{description}

Computer sind heutzutage allgegenwärtig. Viele Menschen besitzen mobile Geräte, die in Sachen Rechenleistung stationären Computern nur noch in wenig nachstehen. Der wirtschaftliche Nutzen des sogenannten "`ubiquitous computing"' ist vielseitig. So könnten beispielsweise Restaurantbesitzer besondere Mittagsangebote auf das Smartphone der potenziellen Kunden senden, die noch unentschlossen vor ihrem Lokal stehen. Könnte man vorhersehen, wo sich die Anwender zukünftig hinbewegen, so könnten Angebote schon im Vorfeld unterbreitet oder Informationen verschickt werden.

Ziel des Projekts ist es, eine Handyanwendung zu programmieren, welche die nötigen Daten für eine verlässliche Positionsvorhersage sammelt, und diese auszuwerten. Somit soll untersucht werden, mit welcher Genauigkeit Bewegungen von Menschen vorhergesagt werden können. Im Rahmen dieser Arbeit liegt der Fokus auf der Positionsvorhersage.

Methodik: Java / AndroidApp, R

Related Work...

Im ersten Abschnitt ...

\section{Methoden}
\subsection{Datenerhebung und -vorerarbeitung}

Um Daten zur anschließenden Auswertung zu sammeln, wurde die Android-Anwendung \emph{AndroidDataCollection}\footnote{Quellcode und Dokumentation finden sich auf \emph{https://github.com/FRSB/AndroidDataCollection}.} entwickelt. Auf dem Mobiltelefon installiert, zeichnet sie minütlich Daten verschiedener Sensoren und Schnittstellen auf und speichert diese lokal in einer Datei. Für die in Abschnitt~\ref{subsec:analysis} beschriebenen Analysen sind folgende Informationen relevant: (1) Mobilfunkzellen-ID der aktuell verwendeten Zelle (GSM oder UMTS) und (2) Position des Mobiltelefons\footnote{Die Positionsbestimmung findet hierarchisch statt. Zunächst wird versucht, die ungefähre Position über die aktuell verwendete Mobilfunkzelle zu ermitteln. Falls ein Drahtlosnetzwerk zur Verfügung steht über das hinreichend genaue Positionsdaten verfügbar sind, wird die Position aktualisiert. Sollte das GPS-Signal anliegen und stark genug sein, überschreibt es die ungefähren Positionsdaten. So wird der API die bestmögliche Position übergeben. Nähere Informationen finden sich im Android Developers API Guide unter \emph{http://developer.android.com/guide/topics/location/strategies.html}.}.

Nach einer gewissen Zeit wird das Mobiltelefon über USB mit dem Computer verbunden und die gesammelten Daten in Form einer CSV-Datei übertragen. Damit aus den minütlich aufgezeichneten Positionsdaten eine Bewegungsvorhersage möglich ist, müssen ein paar Datenaufbereitungen und -transformationen stattfinden. So werden zunächst fehlerhaft aufgezeichnete Datensätze und Aufzeichnungen ohne bestimmbare Mobilfunkzellen-ID entfernt. Anschließend folgen zwei Vorverarbeitungsschritte unabhängig voneinander: Extrahieren der Bewegungen und Schätzung der Mobilfunkzellenpositionen.

\begin{description}
\item[Extrahieren der Bewegungen.] Hierfür werden die aufgezeichneten Zellen in zeitlich korrekter Reihenfolge hintereinander gereiht. Aufeinanderfolgende Aufzeichnungen, bei denen sich die Mobilfunkzellen-ID nicht ändert, werden entfernt. So bleibt eine Folge von Zellenübergängen übrig, die später zur Vorhersage verwendet werden kann.
\item[Schätzung der Mobilfunkzellenpositionen.] Um die aufgezeichneten Bewegungen visualisieren zu können, wird zu jeder gesehenen Mobilfunkzelle eine ungefähre Position bestimmt. Dies geschieht, indem die Daten nach Mobilfunkzelle gruppiert und anschließend die jeweils gemessenen Positionen des Mobiltelefons gemittelt werden. So entsteht eine Zuordnung von Mobilfunkzellen zu Positionen.
\end{description}

\subsection{Datenanalyse}
\label{subsec:analysis}

\subsubsection*{Modellbildung}

Die Bewegungen eines Mobiltelefonnutzers werden als stochastischer Prozess modelliert. Es gibt einen Beobachtungszeitraum $T = \{0,\ldots,n\}$ und einen Zustandsraum $S = \{1, \ldots, m\}$. Ein Nutzer $u$ befindet sich zum Zeitpunkt $t \in T$ im Zustand $x_t \in S$. Ein Zustand entspricht der Mobilfunkzelle, an welcher der Nutzer angemeldet ist. Eine Bewegung von einer Mobilfunkzelle zur nächsten entspricht somit einer diskreten Zustandsänderung von $x_t$ zu $x_{t+1}$. Jeder Zustandsänderung wird eine gewisse Wahrscheinlichkeit in Abhängigkeit der vergangenen Zustände zugeordnet. Solche Modelle werden Markov-Modelle genannt.\footcite[Vgl.][S.~607~ff.]{bishop2006pattern} In den folgenden Absätzen sollen die zur Vorhersage verwendeten Modelle vorgestellt werden.

Will man die nächste Position eines Nutzers vorhersagen, erscheint es nützlich, dies in Abhängigkeit der aktuellen Position zu tun. Das entstehende Markov-Modell ist eine Markov-Kette erster Ordnung. Unter der Annahme stationärer Übergangswahrscheinlichkeiten\footnote{Hängt die Wahrscheinlichkeit $p(x_{t+1}|x_{t})$ für den Übergang von $x_t$ nach $x_{t+1}$ nicht von $t$ ab, spricht man von sogenannten stationären Übergangswahrscheinlichkeiten. Es spielt für den Übergang also keine Rolle an welchem Zeitpunkt er stattfindet. [CITATION MISSING (Lucas fragen)]} lässt sich das Modell mit Hilfe eines Transitionsdiagramms und der zugehörigen Transitionsmatrix beschreiben. Exemplarisch soll für die folgenden Erklärungen ein Modell mit drei Zuständen betrachtet werden. Das Transitionsdiagramm ist in Abbildung~\ref{img:transitions} dargestellt. Die zugehörigen Übergangswahrscheinlichkeiten werden in einer Transitionsmatrix der Form
\begin{equation}
A=\begin{bmatrix}
A_{11} & A_{12} & A_{13} \\
A_{21} & A_{22} & A_{23} \\
A_{31} & A_{32} & A_{33}
\end{bmatrix}
\end{equation}
dargestellt, wobei $A_{ij}$ der Wahrscheinlichkeit $p(x_{t+1} = j | x_t=i)$ für den Zustandsübergang von $x=i$ nach $x=j$ entspricht. Zusätzlich müssen die Übergangswahrscheinlichkeiten in $A$ zeilenweise die Bedingungen an eine Wahrscheinlichkeitsverteilung erfüllen:
\begin{equation}
\forall i,j \in S: A_{ij} \geq 0,
\end{equation}
\begin{equation}
\forall i\in S: \sum_{j\in S} A_{ij} = 1.
\end{equation}

\begin{figure}
\begin{center}
	\begin{tabular}{@{}r@{}}
		\scalebox{.6}{%
			\scalefont{2}
			\input{img/transition_chart.tex}
			}\\
		\footnotesize Quelle: \cite[In Anlehnung an][S.~611]{bishop2006pattern}
	\end{tabular}
	
	\end{center}
	\caption{Transitionsdiagramm für eine Markov-Kette erster Ordnung. Die Wahrscheinlichkeiten für einen Zustandsübergang von $x=i$ nach $x=j$ werden durch das Element $A_{ij}$ der zugehörigen Transitionsmatrix ausgedrückt.}
	\label{img:transitions}
\end{figure}

\begin{itemize}
\item Zustandsdiagramm
\item Graphisches Modell
\item ML-Schätzer
\end{itemize}

\subsubsection*{Markov-Ketten höherer Ordnung}

\begin{itemize}
\item Unterschied zu 1. Ordnung
\item Schätzer (Herleitung im Anhang?)
\end{itemize}

\subsubsection*{Vorhersage}

\section{Experimente}

\subsection{Datensätze}

\subsection{Untersuchung der Vorhersagegenauigkeit}

\begin{figure}[p]
\begin{center}
\includegraphics*[width=.9\linewidth]{prediction_accuracy_sb}
\caption{Genauigkeit}
\label{img:accuracy_sb}
\end{center}
\end{figure}

\begin{figure}[p]
\begin{center}
\includegraphics*[width=.9\linewidth]{prediction_accuracy_mb}
\caption{Genauigkeit}
\label{img:accuracy_mb}
\end{center}
\end{figure}

\begin{itemize}
\item 
\end{itemize}

\section{Schlussbetrachtung}

\begin{description}
\item[Zusammenfassung] die wichtigsten Ergebnisse der Arbeit werden zusammengefasst
\item[Kritische Würdigung und Ausblick] Erläuterung der Schwächen und Grenzen der (Methodik der) Arbeit. Durch welche Verbesserungen und weiteren Schritte kann diesen Schwächen entgegengewirkt werden? Ggf. Ausblick auf weitere offene Forschungsfragen bezüglich der Arbeit.
\end{description} 

Kritik/Erweiterungsmöglichkeiten:
\begin{itemize}
\item mehr Daten -> Modelle unterbestimmt
\item Einbezug weiterer Features (Uhrzeit)
\item GPS und Rastern / Clustering -> HMM
\item Ensemble Learning
\end{itemize}


\newpage

\parskip 12pt %Absatzabstand
\renewcommand{\baselinestretch}{1.00}\normalsize

\printbibliography

\section*{Anhang}

\begin{itemize}
\item im folgenden am Beispiel Markov-Ketten erster Ordnung
\item Zeitdiskrete Markov-Kette
\item Zustandsraum $S \in \{1, 2, 3, \ldots\}$
\item homogene Markov-Kette: $p_{ij}(t)=p_{ij}$ (stationäre Übergangswahrscheinlichkeiten)
\item $P = p_{ij}$ ist Übergangsmatrix ($p_{ij} \geq 0$, $\sum_{j_\in S} p_{ij} = 1$)
\item Stochastischer Prozess $X=\{X_t, t\in N_0\}$, $S$ diskret heißt Markov-Kette $p$-ter Ordnung, gdw. $\forall i_0, i_1, \ldots, i_{t+1} \in S, t \geq p+1$ gilt\\
$P(X_{t+1} = i_{t+1} | X_t=i_t, \ldots, X_{t-p+1} = i_{t-p+1}, \ldots, X_0 = i_0)$\\
$= P(X_{t+1} = i_{t+1} | X_t=i_t, \ldots, X_{t-p+1} = i_{t-p+1})$ (Markov-Eigenschaft)
\item Inferenz bei homogenen Markov-Ketten erster Ordnung $\hat p_{ij} = \frac{n_{ij}}{n_{i}}$, mit $n_{ij}$ als Anzahl beobachteter Übergänge von $i$ nach $j$.
\item \textbf{Maximum Likelihood erster Ordnung}
\begin{enumerate}
%\item $ \displaystyle L(p_0,P|X) = \prod_{t=1}^T L(x_t|x_{t-1}, P) \cdot L(x_0|p_0)$
%\item $ \displaystyle L(p_0,P) = P(X_0 = i_0, \ldots, X_T = i_T)$
%\item $ \displaystyle L(P) =p_{i_0}\cdot p_{i_0i_1}\cdot \ldots \cdot p_{i_{T-1}i_T}$
\item Likelihood:\\
$ \displaystyle L(P) = \prod_{i=1}^m\prod_{j=1}^m p_{ij}^{n_{ij}},\quad i,j \in \text{Zustandsraum}$
% Problem ist noch erster und letzter Zustand!
\item Log-Likelihood:\\
$ \displaystyle l(P) = \sum_{i=1}^m\sum_{j=1}^m n_{ij} \cdot \ln p_{ij},\quad s.t.\ \forall i: \sum_{j=1}^m p_{ij}=1$
\item $ \displaystyle \mathcal L(P, \lambda_1, \ldots, \lambda_m) = \sum_{i=1}^m \sum_{j=1}^m n_{ij} \ln(p_{ij}) - \sum_{i=1}^m \lambda_i \left(\left(\sum_{j=1}^m p_{ij}\right) - 1 \right)$
\item $ \displaystyle \frac{\partial \mathcal L}{\partial p_{ij}} = \frac{n_{ij}}{p_{ij}} - \lambda_i$
\item FOC: $ \displaystyle \frac{n_{ij}}{p_{ij}} - \lambda_i = 0\quad \Leftrightarrow \quad p_{ij} = \frac{n_{ij}}{\lambda_i}$
\item $ \displaystyle \frac{\partial \mathcal L}{\partial \lambda_{i}} = 1 - \sum_{j=1}^m p_{ij}$
\item FOC: $ \displaystyle 1 - \sum_{j=1}^m p_{ij} = 0$
\item $ \displaystyle 1 - \sum_{j=1}^m \frac{n_{ij}}{\lambda_i} = 0$
\item $ \displaystyle \sum_{j=1}^m n_{ij} = \lambda_i$
\item $ \displaystyle \hat p_{ij} = \frac{n_{ij}}{\sum_{j=1}^m n_{ij}}$
\end{enumerate}
\end{itemize}


\end{document}

